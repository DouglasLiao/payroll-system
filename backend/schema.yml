openapi: 3.0.3
info:
  title: Sistema de Gestão de Pagamentos PJ - API
  version: 1.0.0
  description: "\n# Sistema de Folha de Pagamento para Prestadores PJ\n\nEste sistema
    gerencia o cálculo de pagamentos para prestadores **Pessoa Jurídica (PJ)** \ncom
    regras contratuais customizadas que incluem:\n\n- ✅ Horas extras (50% adicional)\n-
    ✅ Horas em feriados (100% adicional)  \n- ✅ Adicional noturno (20%)\n- ✅ DSR (Descanso
    Semanal Remunerado)\n- ✅ Descontos (atrasos, faltas, vale transporte)\n- ✅ Adiantamento
    quinzenal\n\n## Fórmulas de Cálculo\n\n### Valor da Hora\n```\nvalor_hora = valor_contrato_mensal
    ÷ 220\n```\n\n### Adiantamento Quinzenal (padrão 40%)\n```\nadiantamento = valor_contrato_mensal
    × 0.40\n```\n\n### Horas Extras 50%\n```\nvalor_hora_extra = valor_hora × 1.5\ntotal_horas_extras
    = horas_extras × valor_hora_extra\n```\n\n### Horas em Feriado (100%)\n```\nvalor_hora_feriado
    = valor_hora × 2.0\ntotal_feriados = horas_feriado × valor_hora_feriado\n```\n\n###
    DSR (16.67%)\n```\ndsr = total_horas_extras × 0.1667\n```\n\n### Adicional Noturno
    (20%)\n```\nadicional_noturno = horas_noturnas × (valor_hora × 0.20)\n```\n\n###
    Valor Final\n```\nproventos = saldo_base + horas_extras + feriados + dsr + adicional_noturno\ndescontos
    = atrasos + faltas + dsr_sobre_faltas + vt + manuais\nlíquido = proventos - descontos\n```\n\n##
    Autenticação\n\n⚠️ **Nota**: Autenticação será implementada em fase futura. \nPor
    enquanto, todos os endpoints estão abertos para desenvolvimento.\n    "
  contact:
    name: Equipe de Desenvolvimento
    email: dev@payroll-system.com
  license:
    name: Proprietary
paths:
  /api/providers/:
    post:
      operationId: providers_create
      tags:
      - providers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProviderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProviderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProviderRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Provider'
          description: ''
    get:
      operationId: providers_list
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - providers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedProviderList'
          description: ''
  /api/providers/{id}/:
    patch:
      operationId: providers_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Prestador.
        required: true
      tags:
      - providers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedProviderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedProviderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedProviderRequest'
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Provider'
          description: ''
    get:
      operationId: providers_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Prestador.
        required: true
      tags:
      - providers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Provider'
          description: ''
    put:
      operationId: providers_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Prestador.
        required: true
      tags:
      - providers
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProviderRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/ProviderRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/ProviderRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Provider'
          description: ''
    delete:
      operationId: providers_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Prestador.
        required: true
      tags:
      - providers
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
  /api/payments/:
    post:
      operationId: payments_create
      tags:
      - payments
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
          description: ''
    get:
      operationId: payments_list
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - payments
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPaymentList'
          description: ''
  /api/payments/{id}/:
    patch:
      operationId: payments_partial_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this payment.
        required: true
      tags:
      - payments
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedPaymentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedPaymentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedPaymentRequest'
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
          description: ''
    get:
      operationId: payments_retrieve
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this payment.
        required: true
      tags:
      - payments
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
          description: ''
    put:
      operationId: payments_update
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this payment.
        required: true
      tags:
      - payments
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
          description: ''
    delete:
      operationId: payments_destroy
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this payment.
        required: true
      tags:
      - payments
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
  /api/payments/{id}/pay/:
    post:
      operationId: payments_pay_create
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this payment.
        required: true
      tags:
      - payments
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PaymentRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payment'
          description: ''
  /api/payrolls/:
    post:
      operationId: payrolls_create
      description: |-
        ViewSet para gerenciamento de folhas de pagamento PJ.

        Fornece operações CRUD e actions customizadas para criar, fechar e pagar folhas.
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '201':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payroll'
          description: ''
    get:
      operationId: payrolls_list
      description: |-
        ViewSet para gerenciamento de folhas de pagamento PJ.

        Fornece operações CRUD e actions customizadas para criar, fechar e pagar folhas.
      parameters:
      - name: page
        required: false
        in: query
        description: A page number within the paginated result set.
        schema:
          type: integer
      tags:
      - payrolls
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PaginatedPayrollList'
          description: ''
  /api/payrolls/calculate/:
    post:
      operationId: payrolls_calculate_create
      description: |-
        Cria uma nova folha de pagamento usando o PayrollService.

        POST /api/payrolls/calculate/

        Body:
        {
            "provider_id": 1,
            "reference_month": "01/2026",
            "overtime_hours_50": 10,
            "holiday_hours": 8,
            ...
        }
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayrollCreateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PayrollCreateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PayrollCreateRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayrollCreate'
          description: ''
  /api/payrolls/{id}/:
    patch:
      operationId: payrolls_partial_update
      description: |-
        ViewSet para gerenciamento de folhas de pagamento PJ.

        Fornece operações CRUD e actions customizadas para criar, fechar e pagar folhas.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedPayrollUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedPayrollUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedPayrollUpdateRequest'
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayrollUpdate'
          description: ''
    get:
      operationId: payrolls_retrieve
      description: |-
        ViewSet para gerenciamento de folhas de pagamento PJ.

        Fornece operações CRUD e actions customizadas para criar, fechar e pagar folhas.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayrollDetail'
          description: ''
    put:
      operationId: payrolls_update
      description: |-
        ViewSet para gerenciamento de folhas de pagamento PJ.

        Fornece operações CRUD e actions customizadas para criar, fechar e pagar folhas.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayrollUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PayrollUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PayrollUpdateRequest'
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayrollUpdate'
          description: ''
    delete:
      operationId: payrolls_destroy
      description: Sobrescreve delete para permitir apenas para folhas DRAFT.
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '204':
          description: No response body
  /api/payrolls/{id}/close/:
    post:
      operationId: payrolls_close_create
      description: |-
        Fecha a folha de pagamento.

        POST /api/payrolls/{id}/close/
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payroll'
          description: ''
  /api/payrolls/{id}/mark-paid/:
    post:
      operationId: payrolls_mark_paid_create
      description: |-
        Marca a folha como paga.

        POST /api/payrolls/{id}/mark-paid/
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payroll'
          description: ''
  /api/payrolls/{id}/recalculate/:
    patch:
      operationId: payrolls_recalculate_partial_update
      description: |-
        Recalcula a folha com novos valores (apenas folhas DRAFT).

        PUT/PATCH /api/payrolls/{id}/recalculate/

        Body (todos opcionais):
        {
            "overtime_hours_50": 15,
            "notes": "Atualizado"
        }
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PatchedPayrollUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PatchedPayrollUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PatchedPayrollUpdateRequest'
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayrollUpdate'
          description: ''
    put:
      operationId: payrolls_recalculate_update
      description: |-
        Recalcula a folha com novos valores (apenas folhas DRAFT).

        PUT/PATCH /api/payrolls/{id}/recalculate/

        Body (todos opcionais):
        {
            "overtime_hours_50": 15,
            "notes": "Atualizado"
        }
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayrollUpdateRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PayrollUpdateRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PayrollUpdateRequest'
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/PayrollUpdate'
          description: ''
  /api/payrolls/{id}/reopen/:
    post:
      operationId: payrolls_reopen_create
      description: |-
        Reabre uma folha fechada (apenas se não foi paga).

        POST /api/payrolls/{id}/reopen/
      parameters:
      - in: path
        name: id
        schema:
          type: integer
        description: A unique integer value identifying this Folha de Pagamento.
        required: true
      tags:
      - payrolls
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
          application/x-www-form-urlencoded:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
          multipart/form-data:
            schema:
              $ref: '#/components/schemas/PayrollRequest'
        required: true
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Payroll'
          description: ''
  /api/dashboard/:
    get:
      operationId: dashboard_retrieve
      tags:
      - dashboard
      security:
      - cookieAuth: []
      - basicAuth: []
      - {}
      responses:
        '200':
          description: No response body
components:
  schemas:
    PaginatedPaymentList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Payment'
    PaginatedPayrollList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Payroll'
    PaginatedProviderList:
      type: object
      required:
      - count
      - results
      properties:
        count:
          type: integer
          example: 123
        next:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=4
        previous:
          type: string
          nullable: true
          format: uri
          example: http://api.example.org/accounts/?page=2
        results:
          type: array
          items:
            $ref: '#/components/schemas/Provider'
    PatchedPaymentRequest:
      type: object
      properties:
        reference:
          type: string
          minLength: 1
          description: e.g. 01/2026
          maxLength: 50
        amount_base:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        bonus:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        status:
          $ref: '#/components/schemas/PaymentStatusEnum'
        paid_at:
          type: string
          format: date
          nullable: true
        provider:
          type: integer
    PatchedPayrollUpdateRequest:
      type: object
      description: Serializer para recálculo/atualização de folha (apenas campos editáveis).
      properties:
        overtime_hours_50:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        holiday_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        night_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        late_minutes:
          type: integer
        absence_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        manual_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        vt_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        notes:
          type: string
    PatchedProviderRequest:
      type: object
      description: Serializer completo para Provider
      properties:
        name:
          type: string
          minLength: 1
          title: Nome
          maxLength: 255
        role:
          type: string
          minLength: 1
          title: Função/Cargo
          maxLength: 100
        monthly_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Mensal Contratado
          description: Valor mensal acordado no contrato PJ
        monthly_hours:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          title: Carga Horária Mensal
          description: 'Horas de trabalho por mês (padrão: 220h)'
        advance_enabled:
          type: boolean
          title: Recebe Adiantamento Quinzenal
        advance_percentage:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: Percentual de Adiantamento
          description: 'Percentual do adiantamento quinzenal (ex: 40%)'
        vt_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Vale Transporte
          description: Valor fixo mensal do vale transporte
        payment_method:
          allOf:
          - $ref: '#/components/schemas/PaymentMethodEnum'
          title: Método de Pagamento
        pix_key:
          type: string
          nullable: true
          title: Chave PIX
          maxLength: 255
        bank_name:
          type: string
          nullable: true
          title: Banco
          maxLength: 100
        bank_agency:
          type: string
          nullable: true
          title: Agência
          maxLength: 20
        bank_account:
          type: string
          nullable: true
          title: Conta
          maxLength: 30
        email:
          type: string
          format: email
          nullable: true
          title: E-mail
          maxLength: 254
        description:
          type: string
          nullable: true
          title: Descrição
    Payment:
      type: object
      properties:
        id:
          type: integer
          readOnly: true
        provider_name:
          type: string
          readOnly: true
        reference:
          type: string
          description: e.g. 01/2026
          maxLength: 50
        amount_base:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        bonus:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        total_calculated:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
        status:
          $ref: '#/components/schemas/PaymentStatusEnum'
        paid_at:
          type: string
          format: date
          nullable: true
        created_at:
          type: string
          format: date-time
          readOnly: true
        provider:
          type: integer
      required:
      - amount_base
      - created_at
      - id
      - provider
      - provider_name
      - reference
      - total_calculated
    PaymentMethodEnum:
      enum:
      - PIX
      - TED
      - TRANSFER
      type: string
      description: |-
        * `PIX` - PIX
        * `TED` - TED
        * `TRANSFER` - Bank Transfer
    PaymentRequest:
      type: object
      properties:
        reference:
          type: string
          minLength: 1
          description: e.g. 01/2026
          maxLength: 50
        amount_base:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        bonus:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        status:
          $ref: '#/components/schemas/PaymentStatusEnum'
        paid_at:
          type: string
          format: date
          nullable: true
        provider:
          type: integer
      required:
      - amount_base
      - provider
      - reference
    PaymentStatusEnum:
      enum:
      - PENDING
      - PAID
      - CANCELLED
      type: string
      description: |-
        * `PENDING` - Pending
        * `PAID` - Paid
        * `CANCELLED` - Cancelled
    Payroll:
      type: object
      description: |-
        Serializer básico para Payroll (sem itens aninhados).
        Usado para listagens.
      properties:
        id:
          type: integer
          readOnly: true
        provider:
          type: integer
          title: Prestador
        provider_name:
          type: string
          readOnly: true
        reference_month:
          type: string
          title: Mês de Referência
          description: 'Formato: MM/YYYY (ex: 01/2026)'
          maxLength: 7
        status:
          $ref: '#/components/schemas/Status488Enum'
        status_display:
          type: string
          readOnly: true
        base_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Base Mensal
          description: Valor mensal do contrato
        hourly_rate:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor por Hora
          description: Calculado automaticamente
        advance_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Adiantamento Quinzenal
        remaining_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Saldo Após Adiantamento
          description: Calculado automaticamente
        overtime_hours_50:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas Extras 50%
          description: Horas extras com 50% de adicional
        holiday_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas em Feriados
          description: Horas trabalhadas em feriados (100% adicional)
        night_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas Noturnas
          description: Horas com adicional noturno (20%)
        late_minutes:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          title: Minutos de Atraso
          description: Total de minutos de atraso no mês
        absence_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas de Falta
        manual_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Descontos Manuais
          description: Outros descontos a serem aplicados
        vt_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Vale Transporte
          description: Valor mensal do VT
        overtime_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor Horas Extras
        holiday_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor Feriados
        dsr_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: DSR
        night_shift_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Adicional Noturno
        total_earnings:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Total de Proventos
        late_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Desconto Atrasos
        absence_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Desconto Faltas
        dsr_on_absences:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: DSR sobre Faltas
        total_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Total de Descontos
        gross_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor Bruto
        net_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor Líquido
        notes:
          type: string
          nullable: true
          title: Observações
          description: Observações e anotações sobre esta folha
        closed_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: Data de Fechamento
        paid_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: Data de Pagamento
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: Criado em
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: Atualizado em
      required:
      - absence_discount
      - base_value
      - closed_at
      - created_at
      - dsr_amount
      - dsr_on_absences
      - gross_value
      - holiday_amount
      - hourly_rate
      - id
      - late_discount
      - net_value
      - night_shift_amount
      - overtime_amount
      - paid_at
      - provider
      - provider_name
      - reference_month
      - remaining_value
      - status_display
      - total_discounts
      - total_earnings
      - updated_at
    PayrollCreate:
      type: object
      description: |-
        Serializer para criação de folha de pagamento via PayrollService.

        Este endpoint calcula automaticamente todos os valores da folha com base nas horas
        trabalhadas e descontos informados, usando as seguintes fórmulas:

        **Cálculos Automáticos:**

        1. **Valor/hora** = valor_contrato ÷ 220h
        2. **Adiantamento** = valor_contrato × percentual_adiantamento
        3. **Hora extra 50%** = horas × (valor_hora × 1.5)
        4. **Feriado** = horas × (valor_hora × 2.0)
        5. **DSR** = total_horas_extras × 16.67%
        6. **Adicional noturno** = horas × (valor_hora × 0.20)
        7. **Desconto atraso** = (minutos ÷ 60) × valor_hora
        8. **Desconto falta** = horas × valor_hora
        9. **DSR s/ faltas** = desconto_falta × 16.67%

        **Exemplo de Request:**
        ```json
        {
          "provider_id": 1,
          "reference_month": "01/2026",
          "overtime_hours_50": 10,
          "holiday_hours": 8,
          "night_hours": 20,
          "late_minutes": 30,
          "absence_hours": 8,
          "manual_discounts": 0,
          "notes": "Folha de janeiro"
        }
        ```

        **Exemplo de Response (201 Created):**
        ```json
        {
          "id": 1,
          "provider_name": "João Silva",
          "reference_month": "01/2026",
          "base_value": "2200.00",
          "hourly_rate": "10.00",
          "advance_value": "880.00",
          "overtime_amount": "150.00",
          "holiday_amount": "160.00",
          "dsr_amount": "25.00",
          "night_shift_amount": "40.00",
          "total_earnings": "1695.00",
          "late_discount": "5.00",
          "absence_discount": "80.00",
          "dsr_on_absences": "13.33",
          "vt_discount": "202.40",
          "total_discounts": "300.73",
          "net_value": "1394.27",
          "status": "DRAFT",
          "items": [...]
        }
        ```
      properties:
        provider_id:
          type: integer
          description: ID do prestador
        reference_month:
          type: string
          description: 'Mês de referência (formato: MM/YYYY, ex: 01/2026)'
          maxLength: 7
        overtime_hours_50:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Horas extras com 50% de adicional
        holiday_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Horas trabalhadas em feriados (100% adicional)
        night_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Horas com adicional noturno (20%)
        late_minutes:
          type: integer
          default: 0
          description: Total de minutos de atraso no mês
        absence_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Horas de falta
        manual_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Outros descontos manuais
        advance_already_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          nullable: true
          description: Adiantamento já pago (se não informado, calcula automaticamente)
        notes:
          type: string
          description: Observações sobre esta folha
      required:
      - provider_id
      - reference_month
    PayrollCreateRequest:
      type: object
      description: |-
        Serializer para criação de folha de pagamento via PayrollService.

        Este endpoint calcula automaticamente todos os valores da folha com base nas horas
        trabalhadas e descontos informados, usando as seguintes fórmulas:

        **Cálculos Automáticos:**

        1. **Valor/hora** = valor_contrato ÷ 220h
        2. **Adiantamento** = valor_contrato × percentual_adiantamento
        3. **Hora extra 50%** = horas × (valor_hora × 1.5)
        4. **Feriado** = horas × (valor_hora × 2.0)
        5. **DSR** = total_horas_extras × 16.67%
        6. **Adicional noturno** = horas × (valor_hora × 0.20)
        7. **Desconto atraso** = (minutos ÷ 60) × valor_hora
        8. **Desconto falta** = horas × valor_hora
        9. **DSR s/ faltas** = desconto_falta × 16.67%

        **Exemplo de Request:**
        ```json
        {
          "provider_id": 1,
          "reference_month": "01/2026",
          "overtime_hours_50": 10,
          "holiday_hours": 8,
          "night_hours": 20,
          "late_minutes": 30,
          "absence_hours": 8,
          "manual_discounts": 0,
          "notes": "Folha de janeiro"
        }
        ```

        **Exemplo de Response (201 Created):**
        ```json
        {
          "id": 1,
          "provider_name": "João Silva",
          "reference_month": "01/2026",
          "base_value": "2200.00",
          "hourly_rate": "10.00",
          "advance_value": "880.00",
          "overtime_amount": "150.00",
          "holiday_amount": "160.00",
          "dsr_amount": "25.00",
          "night_shift_amount": "40.00",
          "total_earnings": "1695.00",
          "late_discount": "5.00",
          "absence_discount": "80.00",
          "dsr_on_absences": "13.33",
          "vt_discount": "202.40",
          "total_discounts": "300.73",
          "net_value": "1394.27",
          "status": "DRAFT",
          "items": [...]
        }
        ```
      properties:
        provider_id:
          type: integer
          description: ID do prestador
        reference_month:
          type: string
          minLength: 1
          description: 'Mês de referência (formato: MM/YYYY, ex: 01/2026)'
          maxLength: 7
        overtime_hours_50:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Horas extras com 50% de adicional
        holiday_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Horas trabalhadas em feriados (100% adicional)
        night_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Horas com adicional noturno (20%)
        late_minutes:
          type: integer
          default: 0
          description: Total de minutos de atraso no mês
        absence_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Horas de falta
        manual_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          default: '0.00'
          description: Outros descontos manuais
        advance_already_paid:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          nullable: true
          description: Adiantamento já pago (se não informado, calcula automaticamente)
        notes:
          type: string
          description: Observações sobre esta folha
      required:
      - provider_id
      - reference_month
    PayrollDetail:
      type: object
      description: |-
        Serializer detalhado para Payroll (com itens aninhados e provider completo).
        Usado para visualização de detalhes.
      properties:
        id:
          type: integer
          readOnly: true
        provider:
          allOf:
          - $ref: '#/components/schemas/ProviderLight'
          readOnly: true
        provider_name:
          type: string
          readOnly: true
        reference_month:
          type: string
          title: Mês de Referência
          description: 'Formato: MM/YYYY (ex: 01/2026)'
          maxLength: 7
        status:
          $ref: '#/components/schemas/Status488Enum'
        status_display:
          type: string
          readOnly: true
        base_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Base Mensal
          description: Valor mensal do contrato
        hourly_rate:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor por Hora
          description: Calculado automaticamente
        advance_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Adiantamento Quinzenal
        remaining_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Saldo Após Adiantamento
          description: Calculado automaticamente
        overtime_hours_50:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas Extras 50%
          description: Horas extras com 50% de adicional
        holiday_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas em Feriados
          description: Horas trabalhadas em feriados (100% adicional)
        night_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas Noturnas
          description: Horas com adicional noturno (20%)
        late_minutes:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          title: Minutos de Atraso
          description: Total de minutos de atraso no mês
        absence_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas de Falta
        manual_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Descontos Manuais
          description: Outros descontos a serem aplicados
        vt_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Vale Transporte
          description: Valor mensal do VT
        overtime_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor Horas Extras
        holiday_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor Feriados
        dsr_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: DSR
        night_shift_amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Adicional Noturno
        total_earnings:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Total de Proventos
        late_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Desconto Atrasos
        absence_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Desconto Faltas
        dsr_on_absences:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: DSR sobre Faltas
        total_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Total de Descontos
        gross_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor Bruto
        net_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          readOnly: true
          title: Valor Líquido
        notes:
          type: string
          nullable: true
          title: Observações
          description: Observações e anotações sobre esta folha
        closed_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: Data de Fechamento
        paid_at:
          type: string
          format: date-time
          readOnly: true
          nullable: true
          title: Data de Pagamento
        created_at:
          type: string
          format: date-time
          readOnly: true
          title: Criado em
        updated_at:
          type: string
          format: date-time
          readOnly: true
          title: Atualizado em
        items:
          type: array
          items:
            $ref: '#/components/schemas/PayrollItem'
          readOnly: true
      required:
      - absence_discount
      - base_value
      - closed_at
      - created_at
      - dsr_amount
      - dsr_on_absences
      - gross_value
      - holiday_amount
      - hourly_rate
      - id
      - items
      - late_discount
      - net_value
      - night_shift_amount
      - overtime_amount
      - paid_at
      - provider
      - provider_name
      - reference_month
      - remaining_value
      - status_display
      - total_discounts
      - total_earnings
      - updated_at
    PayrollItem:
      type: object
      description: Serializer para itens individuais da folha
      properties:
        id:
          type: integer
          readOnly: true
        type:
          allOf:
          - $ref: '#/components/schemas/TypeEnum'
          title: Tipo
        type_display:
          type: string
          readOnly: true
        description:
          type: string
          title: Descrição
          maxLength: 200
        amount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor
      required:
      - amount
      - description
      - id
      - type
      - type_display
    PayrollRequest:
      type: object
      description: |-
        Serializer básico para Payroll (sem itens aninhados).
        Usado para listagens.
      properties:
        provider:
          type: integer
          title: Prestador
        reference_month:
          type: string
          minLength: 1
          title: Mês de Referência
          description: 'Formato: MM/YYYY (ex: 01/2026)'
          maxLength: 7
        status:
          $ref: '#/components/schemas/Status488Enum'
        base_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Base Mensal
          description: Valor mensal do contrato
        advance_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Adiantamento Quinzenal
        overtime_hours_50:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas Extras 50%
          description: Horas extras com 50% de adicional
        holiday_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas em Feriados
          description: Horas trabalhadas em feriados (100% adicional)
        night_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas Noturnas
          description: Horas com adicional noturno (20%)
        late_minutes:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          title: Minutos de Atraso
          description: Total de minutos de atraso no mês
        absence_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Horas de Falta
        manual_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Descontos Manuais
          description: Outros descontos a serem aplicados
        vt_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Vale Transporte
          description: Valor mensal do VT
        notes:
          type: string
          nullable: true
          title: Observações
          description: Observações e anotações sobre esta folha
      required:
      - base_value
      - provider
      - reference_month
    PayrollUpdate:
      type: object
      description: Serializer para recálculo/atualização de folha (apenas campos editáveis).
      properties:
        overtime_hours_50:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        holiday_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        night_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        late_minutes:
          type: integer
        absence_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        manual_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        vt_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        notes:
          type: string
    PayrollUpdateRequest:
      type: object
      description: Serializer para recálculo/atualização de folha (apenas campos editáveis).
      properties:
        overtime_hours_50:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        holiday_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        night_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        late_minutes:
          type: integer
        absence_hours:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        manual_discounts:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        vt_discount:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
        notes:
          type: string
    Provider:
      type: object
      description: Serializer completo para Provider
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          title: Nome
          maxLength: 255
        role:
          type: string
          title: Função/Cargo
          maxLength: 100
        monthly_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Mensal Contratado
          description: Valor mensal acordado no contrato PJ
        monthly_hours:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          title: Carga Horária Mensal
          description: 'Horas de trabalho por mês (padrão: 220h)'
        advance_enabled:
          type: boolean
          title: Recebe Adiantamento Quinzenal
        advance_percentage:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: Percentual de Adiantamento
          description: 'Percentual do adiantamento quinzenal (ex: 40%)'
        vt_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Vale Transporte
          description: Valor fixo mensal do vale transporte
        payment_method:
          allOf:
          - $ref: '#/components/schemas/PaymentMethodEnum'
          title: Método de Pagamento
        pix_key:
          type: string
          nullable: true
          title: Chave PIX
          maxLength: 255
        bank_name:
          type: string
          nullable: true
          title: Banco
          maxLength: 100
        bank_agency:
          type: string
          nullable: true
          title: Agência
          maxLength: 20
        bank_account:
          type: string
          nullable: true
          title: Conta
          maxLength: 30
        email:
          type: string
          format: email
          nullable: true
          title: E-mail
          maxLength: 254
        description:
          type: string
          nullable: true
          title: Descrição
        created_at:
          type: string
          format: date-time
          readOnly: true
        updated_at:
          type: string
          format: date-time
          readOnly: true
      required:
      - created_at
      - id
      - monthly_value
      - name
      - role
      - updated_at
    ProviderLight:
      type: object
      description: Serializer leve para listagens (apenas campos essenciais)
      properties:
        id:
          type: integer
          readOnly: true
        name:
          type: string
          title: Nome
          maxLength: 255
        role:
          type: string
          title: Função/Cargo
          maxLength: 100
        monthly_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Mensal Contratado
          description: Valor mensal acordado no contrato PJ
      required:
      - id
      - monthly_value
      - name
      - role
    ProviderRequest:
      type: object
      description: Serializer completo para Provider
      properties:
        name:
          type: string
          minLength: 1
          title: Nome
          maxLength: 255
        role:
          type: string
          minLength: 1
          title: Função/Cargo
          maxLength: 100
        monthly_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Mensal Contratado
          description: Valor mensal acordado no contrato PJ
        monthly_hours:
          type: integer
          maximum: 9223372036854775807
          minimum: -9223372036854775808
          format: int64
          title: Carga Horária Mensal
          description: 'Horas de trabalho por mês (padrão: 220h)'
        advance_enabled:
          type: boolean
          title: Recebe Adiantamento Quinzenal
        advance_percentage:
          type: string
          format: decimal
          pattern: ^-?\d{0,3}(?:\.\d{0,2})?$
          title: Percentual de Adiantamento
          description: 'Percentual do adiantamento quinzenal (ex: 40%)'
        vt_value:
          type: string
          format: decimal
          pattern: ^-?\d{0,8}(?:\.\d{0,2})?$
          title: Valor Vale Transporte
          description: Valor fixo mensal do vale transporte
        payment_method:
          allOf:
          - $ref: '#/components/schemas/PaymentMethodEnum'
          title: Método de Pagamento
        pix_key:
          type: string
          nullable: true
          title: Chave PIX
          maxLength: 255
        bank_name:
          type: string
          nullable: true
          title: Banco
          maxLength: 100
        bank_agency:
          type: string
          nullable: true
          title: Agência
          maxLength: 20
        bank_account:
          type: string
          nullable: true
          title: Conta
          maxLength: 30
        email:
          type: string
          format: email
          nullable: true
          title: E-mail
          maxLength: 254
        description:
          type: string
          nullable: true
          title: Descrição
      required:
      - monthly_value
      - name
      - role
    Status488Enum:
      enum:
      - DRAFT
      - CLOSED
      - PAID
      type: string
      description: |-
        * `DRAFT` - Rascunho
        * `CLOSED` - Fechada
        * `PAID` - Paga
    TypeEnum:
      enum:
      - CREDIT
      - DEBIT
      type: string
      description: |-
        * `CREDIT` - Crédito
        * `DEBIT` - Débito
  securitySchemes:
    basicAuth:
      type: http
      scheme: basic
    cookieAuth:
      type: apiKey
      in: cookie
      name: sessionid
tags:
- name: providers
  description: Gerenciamento de prestadores PJ
- name: payrolls
  description: Folhas de pagamento com cálculos automáticos
- name: payments
  description: Pagamentos (sistema legado)
